report-findings-bullet-3:
  sql: SELECT
        CALL_FOR_SERVICE as call_for_service,
        COUNT(*) as N,
        PRINTF('%.4f', COUNT(*) * 1.0 / (SELECT COUNT(*) FROM aa_main_table)) as share
      FROM
        aa_main_table
      GROUP BY
        CALL_FOR_SERVICE
  title: "(2020 annual report) Findings regarding RIPA Stop Data Bullet Point 3"
  description_html: "<b>95.3 percent of stops were officer-initiated</b>, while 4.7 percent of stops were in response to a call for service, radio call, or dispatch."

race-ethnicity-by-agency:
  sql: "SELECT b.AGENCY_NAME as agency_name, SUM(RAE_BLACK_AFRICAN_AMERICAN) as n_black, SUM(RAE_HISPANIC_LATINO) as n_latinx, SUM(RAE_ASIAN) as n_asian, SUM(RAE_WHITE) as n_white FROM race_ethnicity as racen INNER JOIN aa_main_table as b ON b.UNIQUE_ID = racen.UNIQUE_ID GROUP BY agency_name"
  title: "Race / Ethnicity by Agency Name"
  description_html: "Stops by race/ethnicity by agency."

race-ethnicity-by-reason-for-stop:
  sql: "SELECT REASON_FOR_STOP, COUNT(REASON_FOR_STOP) as total_stops, SUM(RAE_BLACK_AFRICAN_AMERICAN) as n_black, SUM(RAE_HISPANIC_LATINO) as n_latinx,SUM(RAE_ASIAN) as n_asian,SUM(RAE_WHITE) as n_white, PRINTF('%.2f', SUM(RAE_BLACK_AFRICAN_AMERICAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_black, PRINTF('%.2f', SUM(RAE_HISPANIC_LATINO)*1.0 / COUNT(REASON_FOR_STOP)) as share_latinx, PRINTF('%.2f', SUM(RAE_ASIAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_asian, PRINTF('%.2f', SUM(RAE_WHITE)*1.0 / COUNT(REASON_FOR_STOP)) as share_white FROM aa_main_table as main INNER JOIN race_ethnicity as rae ON rae.UNIQUE_ID = main.UNIQUE_ID GROUP BY REASON_FOR_STOP"
  title: "Race / Ethnicity by Reason for Stop"
  description_html: "<table><thead><tr><th>Code</th><th>Definition</th></tr></thead><tbody><tr><td>1</td><td>Traffic Violation</td></tr><tr><td>2</td><td>Reasonable suspicion</td></tr><tr><td>3</td><td>Parole/probation/PRCS/mandatory supervision</td></tr><tr><td>4</td><td>Knowledge of outstanding arrest warrant/wanted person</td></tr><tr><td>5</td><td>Investigation to determine whether person was truant</td></tr><tr><td>6</td><td>Consensual encounter resulting in search</td></tr><tr><td>7</td><td>Possible conduct under Education Code</td></tr><tr><td>8</td><td>Determine whether student violated school policy</td></tr></tbody></table>"

consensual-encounters-resulting-in-search-by-race-ethnicity:
  sql: "SELECT AGENCY_NAME, COUNT(REASON_FOR_STOP) as total_stops, SUM(RAE_BLACK_AFRICAN_AMERICAN) as n_black, SUM(RAE_HISPANIC_LATINO) as n_latinx, SUM(RAE_ASIAN) as n_asian, SUM(RAE_WHITE) as n_white, PRINTF('%.2f', SUM(RAE_BLACK_AFRICAN_AMERICAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_black, PRINTF('%.2f', SUM(RAE_HISPANIC_LATINO)*1.0 / COUNT(REASON_FOR_STOP)) as share_latinx, PRINTF('%.2f', SUM(RAE_ASIAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_asian, PRINTF('%.2f', SUM(RAE_WHITE)*1.0 / COUNT(REASON_FOR_STOP)) as share_white FROM aa_main_table as main INNER JOIN race_ethnicity as rae ON rae.UNIQUE_ID = main.UNIQUE_ID WHERE REASON_FOR_STOP = 6 GROUP BY main.AGENCY_NAME"
  title: "Consensual Encounters Resulting in Search by Race/Ethnicity"
  description_html: "Consensual encounter resulting in search."

consent-given-for-search-by-race-ethnicity:
  sql: "SELECT main.AGENCY_NAME as agency_name, bfs.BFS_CONSENT_GIVEN as consent_given, COUNT(REASON_FOR_STOP) as total_stops, SUM(RAE_BLACK_AFRICAN_AMERICAN) as n_black, SUM(RAE_HISPANIC_LATINO) as n_latinx, SUM(RAE_ASIAN) as n_asian, SUM(RAE_WHITE) as n_white, PRINTF('%.2f', SUM(RAE_BLACK_AFRICAN_AMERICAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_black, PRINTF('%.2f', SUM(RAE_HISPANIC_LATINO)*1.0 / COUNT(REASON_FOR_STOP)) as share_latinx, PRINTF('%.2f', SUM(RAE_ASIAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_asian, PRINTF('%.2f', SUM(RAE_WHITE)*1.0 / COUNT(REASON_FOR_STOP)) as share_white FROM aa_main_table as main INNER JOIN race_ethnicity as rae ON rae.UNIQUE_ID = main.UNIQUE_ID INNER JOIN basis_for_search as bfs on bfs.UNIQUE_ID = rae.UNIQUE_ID GROUP BY main.AGENCY_NAME, bfs.BFS_CONSENT_GIVEN"
  title: "Consensual Searches by Race/Ethnicity"
  description_html: "Basis for search: consent given."

consensual-encounters-resulting-in-consensual-search-by-race-ethnicity:
  sql: "SELECT main.AGENCY_NAME as agency_name, bfs.BFS_CONSENT_GIVEN as consent_given, COUNT(REASON_FOR_STOP) as total_stops, SUM(RAE_BLACK_AFRICAN_AMERICAN) as n_black, SUM(RAE_HISPANIC_LATINO) as n_latinx, SUM(RAE_ASIAN) as n_asian, SUM(RAE_WHITE) as n_white, PRINTF('%.2f', SUM(RAE_BLACK_AFRICAN_AMERICAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_black, PRINTF('%.2f', SUM(RAE_HISPANIC_LATINO)*1.0 / COUNT(REASON_FOR_STOP)) as share_latinx, PRINTF('%.2f', SUM(RAE_ASIAN)*1.0 / COUNT(REASON_FOR_STOP)) as share_asian, PRINTF('%.2f', SUM(RAE_WHITE)*1.0 / COUNT(REASON_FOR_STOP)) as share_white FROM aa_main_table as main INNER JOIN race_ethnicity as rae ON rae.UNIQUE_ID = main.UNIQUE_ID INNER JOIN basis_for_search as bfs on bfs.UNIQUE_ID = rae.UNIQUE_ID WHERE REASON_FOR_STOP = 6 GROUP BY main.AGENCY_NAME, bfs.BFS_CONSENT_GIVEN"
  title: "Consensual Encounters Resulting in Consensual Search by Race/Ethnicity"
  description_html: "Reason for stop: consensual encounter and basis for search: consent given by Race / Ethnicity."
